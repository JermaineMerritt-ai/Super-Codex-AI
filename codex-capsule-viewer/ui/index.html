<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codex Capsule Viewer</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
        
        /* Dark Constellation Theme Custom Styles */
        .constellation-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            position: relative;
        }
        
        .constellation-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, #fbbf24, transparent),
                radial-gradient(1px 1px at 40% 70%, #f59e0b, transparent),
                radial-gradient(1px 1px at 90% 40%, #d97706, transparent),
                radial-gradient(2px 2px at 60% 10%, #b45309, transparent);
            pointer-events: none;
        }
        
        /* Amber Flame Theme Custom Styles */
        .flame-bg {
            background: linear-gradient(135deg, #fef7cd 0%, #fde68a 50%, #f59e0b 100%);
        }
        
        /* Scroll customization */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #f59e0b;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #d97706;
        }
        
        /* Custom animations */
        @keyframes constellation-twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .twinkle {
            animation: constellation-twinkle 2s ease-in-out infinite;
        }
        
        @keyframes flame-flicker {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .flicker {
            animation: flame-flicker 1.5s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Load Components -->
    <script type="text/babel" src="./components/capsule-list.jsx"></script>
    <script type="text/babel" src="./components/capsule-detail.jsx"></script>
    <script type="text/babel" src="./components/heir-recognition.jsx"></script>
    <script type="text/babel" src="./components/covenant-replay.jsx"></script>
    <script type="text/babel" src="./App.jsx"></script>

    <!-- Main App Script -->
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Enhanced theme configuration
        const themeConfig = {
            'dark-constellation': {
                name: 'Dark Constellation',
                icon: 'ðŸŒŒ',
                primary: '#f59e0b',
                secondary: '#fbbf24',
                background: '#0f172a',
                surface: '#1e293b',
                text: '#fef3c7',
                accent: '#d97706'
            },
            'amber-flame': {
                name: 'Amber Flame',
                icon: 'ðŸŒ…',
                primary: '#b45309',
                secondary: '#d97706',
                background: '#fef7cd',
                surface: '#fde68a',
                text: '#1f2937',
                accent: '#f59e0b'
            }
        };

        // Main App with enhanced theming
        const EnhancedApp = () => {
            const [currentTheme, setCurrentTheme] = useState('dark-constellation');
            
            const toggleTheme = () => {
                setCurrentTheme(current => 
                    current === 'dark-constellation' ? 'amber-flame' : 'dark-constellation'
                );
            };
            
            const theme = themeConfig[currentTheme];
            
            useEffect(() => {
                // Apply theme to document
                document.body.className = currentTheme === 'dark-constellation' 
                    ? 'constellation-bg' 
                    : 'flame-bg';
            }, [currentTheme]);
            
            return React.createElement('div', {
                className: `min-h-screen transition-all duration-500 ${
                    currentTheme === 'dark-constellation' 
                        ? 'bg-slate-900 text-amber-100' 
                        : 'bg-amber-50 text-slate-900'
                }`
            }, [
                React.createElement('button', {
                    key: 'theme-toggle',
                    onClick: toggleTheme,
                    className: `fixed top-4 right-4 z-50 px-4 py-2 rounded-lg font-medium transition-all duration-300 shadow-lg ${
                        currentTheme === 'dark-constellation'
                            ? 'bg-amber-600 hover:bg-amber-700 text-slate-900 twinkle'
                            : 'bg-amber-700 hover:bg-amber-800 text-amber-50 flicker'
                    }`,
                    title: `Switch to ${theme.name === 'Dark Constellation' ? 'Amber Flame' : 'Dark Constellation'}`
                }, [
                    React.createElement('span', { key: 'icon' }, theme.icon),
                    ' ',
                    React.createElement('span', { key: 'text' }, 
                        theme.name === 'Dark Constellation' ? 'Amber Flame' : 'Dark Constellation'
                    )
                ]),
                React.createElement(CapsuleList, {
                    key: 'capsule-list',
                    theme: currentTheme
                })
            ]);
        };
        
        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(EnhancedApp));
    </script>
</body>
</html>