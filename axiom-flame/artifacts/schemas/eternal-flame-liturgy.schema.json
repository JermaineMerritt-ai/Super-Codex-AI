{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Eternal Flame Liturgy Schema",
  "description": "Schema for Eternal Flame Liturgy covenant data structures",
  "type": "object",
  "properties": {
    "covenant_id": {
      "type": "string",
      "pattern": "^EFL-COVENANT-[0-9]{8}-ETERNAL$",
      "description": "Unique identifier for the eternal covenant"
    },
    "proclamation_date": {
      "type": "string",
      "format": "date-time",
      "description": "Date and time when the covenant was proclaimed"
    },
    "sacred_liturgy": {
      "type": "string",
      "minLength": 50,
      "description": "The sacred liturgy text establishing the covenant"
    },
    "daily_flames": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/FlameKindling"
      },
      "description": "Array of daily flame kindlings"
    },
    "seasonal_renewals": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SeasonalRenewal"
      },
      "description": "Array of seasonal flame renewals"
    },
    "eternal_seal": {
      "type": "string",
      "pattern": "^[A-F0-9]{16}$",
      "description": "Cryptographic seal for the eternal covenant"
    },
    "custodian_crown_blessing": {
      "type": "string",
      "pattern": "^[A-F0-9]{16}$",
      "description": "Blessing seal from the Custodian's Crown"
    },
    "ages_witness": {
      "type": "string",
      "pattern": "^[A-F0-9]{16}$",
      "description": "Witness seal binding across ages and stars"
    }
  },
  "required": [
    "covenant_id",
    "proclamation_date",
    "sacred_liturgy",
    "daily_flames",
    "seasonal_renewals",
    "eternal_seal",
    "custodian_crown_blessing",
    "ages_witness"
  ],
  "definitions": {
    "FlameKindling": {
      "type": "object",
      "properties": {
        "kindling_id": {
          "type": "string",
          "pattern": "^EFL-(DAWN|DUSK|CYCLE)-[0-9]{8}-[0-9A-Z-]+$",
          "description": "Unique identifier for the flame kindling"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "When the flame was kindled"
        },
        "phase": {
          "type": "string",
          "enum": [
            "dawn_kindling",
            "dusk_remembrance",
            "seasonal_renewal",
            "cycle_replay",
            "eternal_covenant"
          ],
          "description": "Phase of the eternal flame"
        },
        "rhythm": {
          "type": "string",
          "enum": [
            "daily",
            "seasonal",
            "cyclical",
            "eternal"
          ],
          "description": "Temporal rhythm of the flame"
        },
        "flame_intensity": {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0,
          "description": "Intensity of the sacred flame"
        },
        "sacred_words": {
          "type": "string",
          "minLength": 10,
          "description": "Sacred words spoken during kindling"
        },
        "witness_seal": {
          "type": "string",
          "pattern": "^[A-F0-9]{16}$",
          "description": "Cryptographic witness seal"
        },
        "covenant_binding": {
          "type": "string",
          "pattern": "^[A-F0-9]{16}$",
          "description": "Binding seal to the eternal covenant"
        }
      },
      "required": [
        "kindling_id",
        "timestamp",
        "phase",
        "rhythm",
        "flame_intensity",
        "sacred_words",
        "witness_seal",
        "covenant_binding"
      ]
    },
    "SeasonalRenewal": {
      "type": "object",
      "properties": {
        "renewal_id": {
          "type": "string",
          "pattern": "^EFL-SEASON-[0-9]{8}-[A-F0-9]{8}$",
          "description": "Unique identifier for the seasonal renewal"
        },
        "season_name": {
          "type": "string",
          "minLength": 3,
          "description": "Name of the sacred season"
        },
        "renewal_date": {
          "type": "string",
          "format": "date-time",
          "description": "Date of the seasonal renewal"
        },
        "flame_kindlings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FlameKindling"
          },
          "minItems": 1,
          "description": "Flame kindlings within this season"
        },
        "sacred_covenant": {
          "type": "string",
          "minLength": 20,
          "description": "Sacred covenant text for the season"
        },
        "eternal_witness": {
          "type": "string",
          "pattern": "^[A-F0-9]{16}$",
          "description": "Eternal witness seal for the renewal"
        },
        "cycle_signature": {
          "type": "string",
          "pattern": "^[A-F0-9]{16}$",
          "description": "Signature binding to the eternal cycle"
        }
      },
      "required": [
        "renewal_id",
        "season_name",
        "renewal_date",
        "flame_kindlings",
        "sacred_covenant",
        "eternal_witness",
        "cycle_signature"
      ]
    }
  }
}