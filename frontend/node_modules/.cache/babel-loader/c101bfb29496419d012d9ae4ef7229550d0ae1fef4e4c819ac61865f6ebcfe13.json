{"ast":null,"code":"// src/api.ts\nexport async function api(path, method = \"GET\", body, token) {\n  const res = await fetch(`/api${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(token ? {\n        Authorization: `Bearer ${token}`\n      } : {})\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\n\n// Helper functions for common API operations\nexport const apiClient = {\n  // Health checks\n  health: {\n    live: () => api(\"/health/live\"),\n    ready: () => api(\"/health/ready\"),\n    deps: () => api(\"/health/deps\")\n  },\n  // Authentication\n  auth: {\n    login: credentials => api(\"/auth/login\", \"POST\", credentials),\n    refresh: token => api(\"/auth/refresh\", \"POST\", {}, token),\n    logout: token => api(\"/auth/logout\", \"POST\", {}, token)\n  },\n  // Workflow management\n  workflow: {\n    list: token => api(\"/workflow\", \"GET\", undefined, token),\n    create: (workflow, token) => api(\"/workflow\", \"POST\", workflow, token),\n    get: (id, token) => api(`/workflow/${id}`, \"GET\", undefined, token),\n    update: (id, workflow, token) => api(`/workflow/${id}`, \"PUT\", workflow, token),\n    delete: (id, token) => api(`/workflow/${id}`, \"DELETE\", undefined, token),\n    start: (name, data, token) => api(`/workflow/start?name=${encodeURIComponent(name)}`, \"POST\", data, token),\n    advance: (workflowId, phase, data, token) => api(`/workflow/${workflowId}/advance?phase=${encodeURIComponent(phase)}`, \"POST\", data, token)\n  },\n  // Axiom-flame ceremonial operations (proxy through backend)\n  axiom: {\n    health: () => api(\"/axiom/health\"),\n    execute: (command, payload, token) => api(\"/axiom/execute\", \"POST\", {\n      command,\n      payload\n    }, token),\n    reason: (params, token) => api(\"/axiom/reason\", \"POST\", params, token),\n    grant: (params, token) => api(\"/axiom/grant\", \"POST\", params, token),\n    ceremonies: token => api(\"/axiom/ceremonies\", \"GET\", undefined, token)\n  }\n};\n\n// WebSocket helper for real-time updates\nexport function createWebSocket(token, onMessage) {\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  const wsUrl = `${protocol}//${window.location.host}/ws?token=${token}`;\n  const ws = new WebSocket(wsUrl);\n  ws.onmessage = event => {\n    try {\n      const data = JSON.parse(event.data);\n      onMessage(data);\n    } catch (error) {\n      console.error(\"Failed to parse WebSocket message:\", error);\n    }\n  };\n  ws.onerror = error => {\n    console.error(\"WebSocket error:\", error);\n  };\n  return ws;\n}\n\n// Error handling types\n\n// Response types","map":{"version":3,"names":["api","path","method","body","token","res","fetch","headers","Authorization","JSON","stringify","undefined","ok","Error","text","json","apiClient","health","live","ready","deps","auth","login","credentials","refresh","logout","workflow","list","create","get","id","update","delete","start","name","data","encodeURIComponent","advance","workflowId","phase","axiom","execute","command","payload","reason","params","grant","ceremonies","createWebSocket","onMessage","protocol","window","location","wsUrl","host","ws","WebSocket","onmessage","event","parse","error","console","onerror"],"sources":["C:/Users/JMerr/OneDrive/Documents/.vscode/codex_project/backend/services/dominion/Super-Codex-AI/frontend/src/api.ts"],"sourcesContent":["// src/api.ts\r\nexport async function api(path: string, method = \"GET\", body?: any, token?: string) {\r\n  const res = await fetch(`/api${path}`, {\r\n    method,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    },\r\n    body: body ? JSON.stringify(body) : undefined,\r\n  });\r\n  if (!res.ok) throw new Error(await res.text());\r\n  return res.json();\r\n}\r\n\r\n// Helper functions for common API operations\r\nexport const apiClient = {\r\n  // Health checks\r\n  health: {\r\n    live: () => api(\"/health/live\"),\r\n    ready: () => api(\"/health/ready\"),\r\n    deps: () => api(\"/health/deps\"),\r\n  },\r\n\r\n  // Authentication\r\n  auth: {\r\n    login: (credentials: { username: string; password: string }) =>\r\n      api(\"/auth/login\", \"POST\", credentials),\r\n    refresh: (token: string) => api(\"/auth/refresh\", \"POST\", {}, token),\r\n    logout: (token: string) => api(\"/auth/logout\", \"POST\", {}, token),\r\n  },\r\n\r\n  // Workflow management\r\n  workflow: {\r\n    list: (token: string) => api(\"/workflow\", \"GET\", undefined, token),\r\n    create: (workflow: any, token: string) =>\r\n      api(\"/workflow\", \"POST\", workflow, token),\r\n    get: (id: string, token: string) =>\r\n      api(`/workflow/${id}`, \"GET\", undefined, token),\r\n    update: (id: string, workflow: any, token: string) =>\r\n      api(`/workflow/${id}`, \"PUT\", workflow, token),\r\n    delete: (id: string, token: string) =>\r\n      api(`/workflow/${id}`, \"DELETE\", undefined, token),\r\n    start: (name: string, data: { capsule?: string }, token: string) =>\r\n      api(`/workflow/start?name=${encodeURIComponent(name)}`, \"POST\", data, token),\r\n    advance: (workflowId: string, phase: string, data: { note?: string }, token: string) =>\r\n      api(`/workflow/${workflowId}/advance?phase=${encodeURIComponent(phase)}`, \"POST\", data, token),\r\n  },\r\n\r\n  // Axiom-flame ceremonial operations (proxy through backend)\r\n  axiom: {\r\n    health: () => api(\"/axiom/health\"),\r\n    execute: (command: string, payload?: any, token?: string) =>\r\n      api(\"/axiom/execute\", \"POST\", { command, payload }, token),\r\n    reason: (params: {\r\n      actor: string;\r\n      realm: string;\r\n      capsule: string;\r\n      intent?: string;\r\n    }, token?: string) => api(\"/axiom/reason\", \"POST\", params, token),\r\n    grant: (params: {\r\n      recipient: string;\r\n      honor: string;\r\n      authority: string;\r\n    }, token?: string) => api(\"/axiom/grant\", \"POST\", params, token),\r\n    ceremonies: (token?: string) => api(\"/axiom/ceremonies\", \"GET\", undefined, token),\r\n  },\r\n};\r\n\r\n// WebSocket helper for real-time updates\r\nexport function createWebSocket(token: string, onMessage: (data: any) => void) {\r\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\r\n  const wsUrl = `${protocol}//${window.location.host}/ws?token=${token}`;\r\n  \r\n  const ws = new WebSocket(wsUrl);\r\n  \r\n  ws.onmessage = (event) => {\r\n    try {\r\n      const data = JSON.parse(event.data);\r\n      onMessage(data);\r\n    } catch (error) {\r\n      console.error(\"Failed to parse WebSocket message:\", error);\r\n    }\r\n  };\r\n  \r\n  ws.onerror = (error) => {\r\n    console.error(\"WebSocket error:\", error);\r\n  };\r\n  \r\n  return ws;\r\n}\r\n\r\n// Error handling types\r\nexport interface ApiError {\r\n  message: string;\r\n  status?: number;\r\n  code?: string;\r\n}\r\n\r\n// Response types\r\nexport interface HealthResponse {\r\n  status: \"live\" | \"ready\";\r\n  disk_free_bytes?: number;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface AuthResponse {\r\n  access_token: string;\r\n  token_type: string;\r\n  expires_in: number;\r\n  user: {\r\n    id: string;\r\n    username: string;\r\n    role: string;\r\n  };\r\n}\r\n\r\nexport interface WorkflowResponse {\r\n  id: string;\r\n  name: string;\r\n  status: \"pending\" | \"running\" | \"completed\" | \"failed\";\r\n  created_at: string;\r\n  updated_at: string;\r\n  steps: any[];\r\n}\r\n\r\nexport interface AxiomResponse {\r\n  dispatch_id: string;\r\n  timestamp: string;\r\n  status: \"success\" | \"error\";\r\n  result: any;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}