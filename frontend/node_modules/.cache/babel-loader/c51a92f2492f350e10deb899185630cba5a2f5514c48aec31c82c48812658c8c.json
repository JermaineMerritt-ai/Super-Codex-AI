{"ast":null,"code":"// src/lib/ws.ts\nexport function connectCeremonyWS(onEvent) {\n  let retry = 1000;\n  const open = () => {\n    const ws = new WebSocket(`ws://localhost:8010/ws/ceremony`);\n    ws.onmessage = m => onEvent(JSON.parse(m.data));\n    ws.onclose = () => setTimeout(open, retry = Math.min(retry * 2, 15000));\n  };\n  open();\n}","map":{"version":3,"names":["connectCeremonyWS","onEvent","retry","open","ws","WebSocket","onmessage","m","JSON","parse","data","onclose","setTimeout","Math","min"],"sources":["C:/Users/JMerr/OneDrive/Documents/.vscode/codex_project/backend/services/dominion/Super-Codex-AI/frontend/src/lib/ws.ts"],"sourcesContent":["// src/lib/ws.ts\r\nexport function connectCeremonyWS(onEvent: (e:any)=>void) {\r\n  let retry = 1000;\r\n  const open = () => {\r\n    const ws = new WebSocket(`ws://localhost:8010/ws/ceremony`);\r\n    ws.onmessage = (m) => onEvent(JSON.parse(m.data));\r\n    ws.onclose = () => setTimeout(open, retry = Math.min(retry * 2, 15000));\r\n  };\r\n  open();\r\n}"],"mappings":"AAAA;AACA,OAAO,SAASA,iBAAiBA,CAACC,OAAsB,EAAE;EACxD,IAAIC,KAAK,GAAG,IAAI;EAChB,MAAMC,IAAI,GAAGA,CAAA,KAAM;IACjB,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAC,iCAAiC,CAAC;IAC3DD,EAAE,CAACE,SAAS,GAAIC,CAAC,IAAKN,OAAO,CAACO,IAAI,CAACC,KAAK,CAACF,CAAC,CAACG,IAAI,CAAC,CAAC;IACjDN,EAAE,CAACO,OAAO,GAAG,MAAMC,UAAU,CAACT,IAAI,EAAED,KAAK,GAAGW,IAAI,CAACC,GAAG,CAACZ,KAAK,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;EACzE,CAAC;EACDC,IAAI,CAAC,CAAC;AACR","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}